/* ---------------- FONT ---------------- */
@import url("https://fonts.googleapis.com/css2?family=IM+Fell+English:ital@0;1&display=swap");

/* ---------------- THEME VARS ---------------- */
:root{
  --wood1:#c8a77a;
  --wood2:#d2b48c;
  --woodBorder:#5a3e1b;
  --parchment:#ede6d6;
  --ink:#1f1a14;

  /* layout sizing */
  --sideW: 340px;
  --gap: 14px;
  --pad: 14px;

  /* header + main height */
  --headerH: 86px;

  /* ONE SHARED HEIGHT for left/right panels + map */
  --mainH: calc(100vh - var(--headerH) - (2 * var(--pad)));
}

/* ---------------- BASE ---------------- */
*{ box-sizing:border-box; }

body{
  margin:0;
  font-family:"IM Fell English", Georgia, serif;
  background: var(--parchment);
  color: var(--ink);
}

/* Force Leaflet UI to use our font (Leaflet sets Helvetica by default) */
.leaflet-container,
.leaflet-popup-content-wrapper,
.leaflet-popup-content,
.leaflet-tooltip{
  font-family: "IM Fell English", Georgia, serif !important;
}

/* ---------------- HEADER ---------------- */
.header{
  height: var(--headerH);
  display:flex;
  justify-content:space-between;
  align-items:flex-end;
  padding:16px 20px;

  background-color: var(--wood1);
  background-image:
    repeating-linear-gradient(
      90deg,
      rgba(255,255,255,0.06) 0px,
      rgba(255,255,255,0.06) 2px,
      rgba(0,0,0,0.05) 4px,
      rgba(0,0,0,0.05) 6px
    );

  border-bottom:3px solid var(--woodBorder);
}

.title{
  font-size:28px;
  font-weight:normal;
  letter-spacing:0.5px;
}

.subtitle{
  font-size:14px;
  opacity:0.85;
}

.hint{
  font-size:14px;
  opacity:0.9;
}

/* ---------------- LAYOUT ---------------- */
.layout{
  display:grid;
  grid-template-columns: var(--sideW) 1fr var(--sideW);
  grid-template-rows: auto auto;
  gap: var(--gap);
  padding: var(--pad);
  align-items:start;
}

/* ---------------- PANELS (WOOD) ---------------- */
.panel{
  background-color: var(--wood2);
  background-image:
    repeating-linear-gradient(
      90deg,
      rgba(255,255,255,0.05) 0px,
      rgba(255,255,255,0.05) 3px,
      rgba(0,0,0,0.06) 6px,
      rgba(0,0,0,0.06) 9px
    );

  border:3px solid var(--woodBorder);
  border-radius:12px;
  padding:14px;

  height: var(--mainH);
  overflow-y:auto;
}

.sidepanel{ grid-column:1; grid-row:1; }
.rightpanel{ grid-column:3; grid-row:1; }

.panel h2{
  margin-top:10px;
  margin-bottom:6px;
  font-size:18px;
  border-bottom:1px solid rgba(0,0,0,0.3);
  padding-bottom:4px;
}

/* ---------------- PLAYERS ---------------- */
.list{ display:block; }

.player{
  margin-bottom:18px;
  padding-left:8px;
}

/* ---------------- LEADERBOARD ---------------- */
.leaderboard-item{
  margin:10px 0 12px;
  padding:10px;
  border:2px solid rgba(0,0,0,0.25);
  border-radius:10px;
  background: rgba(255,255,255,0.18);
}

.leaderboard-item b{ font-size:16px; }
.leaderboard-item .lb-sub{ font-size:13px; opacity:0.9; margin-top:4px; }

/* ---------------- MAP WRAP ---------------- */
.mapwrap{
  grid-column:2;
  grid-row:1;
  height: var(--mainH);

  background:#e6e0d2;
  border:3px solid var(--woodBorder);
  border-radius:12px;
  overflow:hidden;

  box-shadow:
    0 10px 25px rgba(0,0,0,0.25),
    inset 0 0 0 1px rgba(255,255,255,0.25);
}

#map{
  width:100%;
  height:100%;
  background:transparent;
}

.leaflet-image-layer{
  filter: drop-shadow(0 8px 18px rgba(0,0,0,0.28));
}

/* ---------------- MOVES (RIGHT PANEL) ---------------- */
.moves{
  display:flex;
  align-items:center;
  gap:10px;
  margin:10px 0;
}

.move-btn{
  border:2px solid var(--woodBorder);
  border-radius:10px;
  padding:8px 10px;
  background:#f7f2e7;
  cursor:pointer;
  font-family: inherit;
}

.move-outcome{
  display:inline-block;
  min-height: 1.2em;
  opacity:1;
  transition: opacity 1s linear;
}

/* ---------------- BOTTOM (SKIRMISHES) ---------------- */
.bottomstack{
  grid-column:2;
  grid-row:2;
}

.bottompanel{
  background:#f7f2e7;
  border:3px solid var(--woodBorder);
  border-radius:12px;
  padding:14px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.18);
}

.skirmish-grid{
  display:grid;
  grid-template-columns: 1fr 1fr auto;
  gap:12px;
  align-items:end;
}

.sk-field label{
  display:block;
  font-size:14px;
  margin-bottom:6px;
}

.sk-field select,
.sk-field input{
  width:100%;
  padding:8px 10px;
  border:2px solid rgba(0,0,0,0.25);
  border-radius:10px;
  font-family: inherit;
  background: rgba(255,255,255,0.65);
}

.sk-actions{
  display:flex;
  justify-content:flex-end;
}

#sk-roll{
  border:2px solid var(--woodBorder);
  border-radius:10px;
  padding:10px 12px;
  background: var(--wood2);
  cursor:pointer;
  font-family: inherit;
}

.sk-help{
  margin-top:10px;
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}

.tip{
  padding:6px 10px;
  border-radius:999px;
  border:2px solid var(--woodBorder);
  background:#f7f2e7;
  font-size:12px;
  cursor:help;
}

.skirmish-results{
  margin-top:10px;
  padding-top:10px;
  border-top:1px solid rgba(0,0,0,0.25);
  line-height:1.35;
}

/* ---------------- EVENT MARKERS ---------------- */
.event-icon{
  width: 12px;
  height: 12px;
  border-radius: 999px;
  background: #ffffff;
  border: 2px solid #000;
  display: flex;
  align-items: center;
  justify-content: center;

  /* Make it feel “stamped” onto the map */
  box-shadow: 0 4px 10px rgba(0,0,0,0.25);
}

.event-icon span{
  font-size: 18px;
  line-height: 1;
  font-weight: bold;
  color: #000;
  transform: translateY(-1px);
}

/* Optional: different ring colours per event type (nice visual cue) */
.event-icon[data-type="Administrative"] { border-color: #000; }
.event-icon[data-type="Military"]       { border-color: #7a1414; }
.event-icon[data-type="Expedition"]     { border-color: #1a3d6d; }
