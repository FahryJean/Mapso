/* ---------------- FONT ---------------- */
@import url("https://fonts.googleapis.com/css2?family=IM+Fell+English:ital@0;1&display=swap");

/* ---------------- THEME VARS ---------------- */
:root{
  --wood1:#c8a77a;
  --wood2:#d2b48c;
  --woodBorder:#5a3e1b;
  --parchment:#ede6d6;
  --ink:#1f1a14;

  /* layout sizing */
  --sideW: 340px;
  --gap: 14px;
  --pad: 14px;

  /* if your header height changes a lot, update this */
  --headerH: 86px;

  /* ONE SHARED HEIGHT for sidepanel + map */
  --mainH: calc(100vh - var(--headerH) - (var(--pad) * 2));
}

/* ---------------- BASE ---------------- */
body{
  margin:0;
  font-family:"IM Fell English", Georgia, serif;
  background:var(--parchment);
  color:var(--ink);
}

/* ---------------- HEADER (WOOD) ---------------- */
.header{
  display:flex;
  justify-content:space-between;
  align-items:flex-end;
  padding:16px 20px;

  background-color:var(--wood1);
  background-image:
    repeating-linear-gradient(
      90deg,
      rgba(255,255,255,0.06) 0px,
      rgba(255,255,255,0.06) 2px,
      rgba(0,0,0,0.05) 4px,
      rgba(0,0,0,0.05) 6px
    );

  border-bottom:3px solid var(--woodBorder);
}

.title{ font-size:28px; font-weight:normal; letter-spacing:0.5px; }
.subtitle{ font-size:14px; opacity:0.85; }
.hint{ font-size:14px; opacity:0.85; }

/* ---------------- LAYOUT ---------------- */
.layout{
  display:grid;
  grid-template-columns: var(--sideW) 1fr;
  grid-template-rows: auto auto;
  gap: var(--gap);
  padding: var(--pad);
  align-items:start;
}

/* ---------------- LEFT PANEL ---------------- */
.panel{
  background-color:var(--wood2);
  background-image:
    repeating-linear-gradient(
      90deg,
      rgba(255,255,255,0.05) 0px,
      rgba(255,255,255,0.05) 3px,
      rgba(0,0,0,0.06) 6px,
      rgba(0,0,0,0.06) 9px
    );

  border:3px solid var(--woodBorder);
  border-radius:12px;
  padding:14px;
  overflow-y:auto;
}

.sidepanel{
  grid-column:1;
  grid-row:1;
  height: var(--mainH);
}

.panel h2{
  margin-top:10px;
  margin-bottom:6px;
  font-size:18px;
  border-bottom:1px solid rgba(0,0,0,0.3);
  padding-bottom:4px;
}

.player{
  margin-bottom:18px;
  padding-left:8px;
}
.player b{ font-size:17px; }

/* ---------------- MAP WRAP ---------------- */
.mapwrap{
  grid-column:2;
  grid-row:1;
  height: var(--mainH);

  background:#e6e0d2;
  border:3px solid var(--woodBorder);
  border-radius:12px;
  overflow:hidden;

  box-shadow:
    0 10px 25px rgba(0,0,0,0.25),
    inset 0 0 0 1px rgba(255,255,255,0.25);
}

#map{
  width:100%;
  height:100%;
  background:transparent;
}

.leaflet-image-layer{
  filter: drop-shadow(0 8px 18px rgba(0,0,0,0.28));
}

/* ---------------- BOTTOM STACK ---------------- */
.bottomstack{
  grid-column:2;
  grid-row:2;

  display:flex;
  flex-direction:column;
  gap: var(--gap);
}

/* Keep an empty cell under the left panel */
.layout::before{
  content:"";
  grid-column:1;
  grid-row:2;
}

.bottompanel{
  background-color:var(--wood2);
  background-image:
    repeating-linear-gradient(
      90deg,
      rgba(255,255,255,0.05) 0px,
      rgba(255,255,255,0.05) 3px,
      rgba(0,0,0,0.06) 6px,
      rgba(0,0,0,0.06) 9px
    );

  border:3px solid var(--woodBorder);
  border-radius:12px;
  padding:12px 14px;
  box-shadow: 0 8px 18px rgba(0,0,0,0.18);
}

.moves{
  display:flex;
  align-items:center;
  gap:10px;
  margin:8px 0;
}

.move-btn{
  font-family:inherit;
  padding:6px 10px;
  border-radius:10px;
  border:2px solid var(--woodBorder);
  background:#f7f2e7;
  cursor:pointer;
}

.move-outcome{
  min-height: 1.2em;
  display:inline-block;
  opacity: 1;
}

/* Skirmish layout */
.skirmish-grid{
  display:grid;
  grid-template-columns: 1fr 1fr auto;
  gap: 10px 14px;
  align-items:end;
}

.skirmish-grid label{
  display:flex;
  flex-direction:column;
  gap:6px;
  font-size:16px;
}

.skirmish-grid input,
.skirmish-grid select{
  font-family:inherit;
  padding:6px 10px;
  border-radius:10px;
  border:2px solid var(--woodBorder);
  background:#f7f2e7;
}

#sk-roll{
  font-family:inherit;
  padding:8px 12px;
  border-radius:10px;
  border:2px solid var(--woodBorder);
  background:#f7f2e7;
  cursor:pointer;
}

.tip{
  display:inline-flex;
  justify-content:center;
  align-items:center;
  width:18px;
  height:18px;
  margin-left:6px;
  border-radius:999px;
  border:2px solid var(--woodBorder);
  background:#f7f2e7;
  font-size:12px;
  cursor:help;
}

.skirmish-results{
  margin-top:10px;
  padding-top:10px;
  border-top:1px solid rgba(0,0,0,0.25);
  line-height:1.35;
}
